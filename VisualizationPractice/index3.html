<!DOCTYPE html>
<html>
  <head>
    <script src="https://www.google.com/jsapi"></script>
    <script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script src="jquery.csv-0.71.js"></script>
    <script type="text/javascript">
      google.load("visualization", "1.1", {packages:["bar"]});
      google.setOnLoadCallback(drawStuff);

      function drawStuff() {
       /* var data = new google.visualization.arrayToDataTable([
          ['Genre', 'Female', 'Male'],
          ['Action', 9.02, 13.27],
          ['Adventure', 5.40, 6.68],
          ['Comedy', 19.03, 16.31],
          ['Crime', 3.25, 3.95],
          ['Drama', 19.4, 16.06],
          ['Horror', 2.89, 3.87],
          ['Romance',9.94,6.09],
          ['Sci-Fi',5.41,8.14],
          ['Thriller',7.97,9.36]
        ]);
*/
		$(function() {
		$.get("http://www.sfu.ca/~avahdat/CMPT732/age_genre.csv", function(csvString) {
            // transform the CSV string into a 2-dimensional array
            var arrayData = $.csv.toArrays(csvString, {onParseValue: $.csv.hooks.castToScalar});
             });
            // set the default selection
          //  $("#domain option[value='0']").attr("selected","selected");
          //  $("#range option[value='1']").attr("selected","selected");

		var data = new google.visualization.arrayToDataTable(arrayData);
		var view = new google.visualization.DataView(data);
		view.setColumns([0,3]);
        var options = {
          'chart': {
            title: 'Movie Genre and User Gender Dependency'   
          },
          'bars': 'vertical', // Required for Material Bar Charts.
          axes: {
            y: {
              0: {label: 'Conditional Prob.'} // Bottom x-axis.
              }
         }  
         };

      var chart = new google.charts.Bar(document.getElementById('barchart_material'));
      chart.draw(view, google.charts.Bar.convertOptions(options));
     });
     }
    </script>
  </head>
  <body>
    <div id="barchart_material" style="width: 900px; height: 500px;"></div>
  </body>
</html>